// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  schemas    = ["dbo"]
}

model Apartment {
  id                        Int       @id @default(autoincrement())
  address                   String?   @db.NVarChar(255)
  status                    Int
  purchaseDate              DateTime? @map("PurchaseDate") @db.DateTime2
  floor                     Int?
  size                      Int?
  door                      String?   @db.NVarChar(50)
  investmentType            Int       @map("InvestmentType")
  comments                  String?   @db.NVarChar(255)
  managementFeePercentage   Decimal   @map("ManagementFeePercentage") @db.Decimal(18, 2)
  price                     Decimal?  @db.Decimal(18, 2)
  totalInvestment           Decimal?  @map("TotalInvestment") @db.Decimal(18, 2)
  isUnderDiscussion         Boolean   @default(false) @map("IsUnderDiscussion")
  bedrooms                  Decimal?  @db.Decimal(18, 2)
  isDeleted                 Boolean   @default(false) @map("IsDeleted")
  stageId                   Int?      @map("StageId")

  @@schema("dbo")
  @@map("apartments")
}

model Stakeholder {
  id        Int     @id @default(autoincrement())
  name      String  @db.NVarChar(255)
  type      Int?    @map("Type")
  isDeleted Boolean @default(false) @map("IsDeleted")

  viewingsAsAgent Viewing[] @relation("AgentStakeholder")
  viewingsAsViewedBy Viewing[] @relation("ViewedByStakeholder")

  @@schema("dbo")
  @@map("stakeholders")
}

model Viewing {
  id                Int       @id @default(autoincrement())
  address           String?   @map("Address")
  size              Decimal?  @map("Size") @db.Decimal(9, 2)
  price             Decimal?  @map("Price") @db.Decimal(18, 2)
  bedrooms          Decimal?  @map("Bedrooms") @db.Decimal(3, 1)
  floor             Decimal?  @map("Floor") @db.Decimal(4, 1)
  isElevator        Boolean   @default(false) @map("IsElevator")
  constructionYear  Int?      @map("ConstructionYear") @db.SmallInt
  linkAd            String?   @map("LinkAd") @db.NVarChar(500)
  linkAddress       String?   @map("LinkAddress") @db.NVarChar(500)
  comments          String?   @map("Comments") @db.NVarChar(500)
  agentStakeholderId Int?     @map("AgentStakeholderId")
  viewingDate       DateTime? @map("ViewingDate") @db.DateTime2
  viewedByStakeholderId Int?  @map("ViewedByStakeholderId")
  isDeleted         Boolean   @default(false) @map("IsDeleted")

  agentStakeholder Stakeholder? @relation("AgentStakeholder", fields: [agentStakeholderId], references: [id])
  viewedByStakeholder Stakeholder? @relation("ViewedByStakeholder", fields: [viewedByStakeholderId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("dbo")
  @@map("viewings")
}

